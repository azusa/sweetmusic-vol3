

\lhead[]{}
\rhead[]{}
\chead[BDDの理論的背景]{BDDの理論的背景}

# BDDの理論的背景

## TDDの憂鬱

テスト駆動開発(TDD)とは、



その点において、TDDの歴史は、「テストはしたが動かないプログラム」を生み出してしまうという本質的に内在した弱点を克服するための改善の繰り返しの歴史でもありました。

その意味を含めて、この章ではTDDを「プログラミングとテストすることを工程として統合する開発スタイル」と定義します。



TDDの大きな特徴としてテストコードをプロダクションコードの先に書く「テストファースト」があげられますが、テストのタイミングを先倒しすることについては、「Shift Left Testing」や「Test Early and Often」などがあり、TDDだけの専売特許ではありません。

## メソッドベースのテストとシナリオベースのテスト

TDDの問題点の一つとして、最もシンプルな形式であるオブジェクトのメソッド(引数)の呼び出しに対してテストを記述した場合に、エンドユーザーからのユースケースに従って順を追って呼び出された時の実際の呼び出しシーケンスと、テストからの呼び出しシーケンスが乖離するというものがあります。このことにTDDの普及期から取り組んだのが、1990年代後半から2000年代前半にかけて日本におけるオブジェクト指向開発とテスト駆動開発における論陣をリードした、故石井勝(まさーる)氏^[2005年4月、JR福知山線脱線事故にて逝去]です。

石井氏が生前Webサイトで公開していた内容は、現在オブラブ ^[[http://objectclub.jp/](http://objectclub.jp/)]がメンテナンスを引き継いで公開されています ^[[http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/](http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/)]。

石井氏は、「JUnit 実践講座 - シナリオベースのテストケースの書き方」^[[http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/junit/scenario-based-testcase.html](http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/junit/scenario-based-testcase.html)]で、テストケースを二つの枠に分類しています。テストするクラスのメソッドをもとにメソッドを作成するメソッドベースのテストと、テストするクラスのシナリオを元にメソッドを作成するシナリオベースのテストの二つです。

メソッドベースのテストとシナリオベースのテストの分類では、データを保持するのを目的とするクラスやユーティリティ的なクラスにはメソッドベースを起こし、クラスの振る舞いにバリエーションがあるクラスは、テストパターンに応じてクラスのユースケースのシナリオを起こすシナリオベースのテスト記述を紹介しています。

石井氏の論陣は、当然当時のオブジェクト指向に関する世間の議論をベースとしていますから、ドメイン駆動設計(DDD)に代表されるその後のアプリケーションの設計に関する知見を反映することは出来ていませんが、それでもユニットテストの自動化を考えるにあたって、テストケースをどう構造化するかということに取り組んだ先達であり、その着眼点の鋭さは今日でも目を見はるものがあります。

## BDD

イギリスのコンサルタントであるDan North氏は2003年、JUnitとTDDの影響を受けて、JBehaveというテスティングフレームワークの開発を始めます。その中で見いだした開発スタイルにBDD(behavior driven development)と命名し、その普及と啓蒙にあたるようになりました。


North氏によるBDDの出発点は、テストメソッドのメソッド名を、テストの対するドキュメンテーションとして使用するものです。これはNorth氏の同僚であるChris Stevenson氏が作成したagiledox ^[[http://agiledox.sourceforge.net/](http://agiledox.sourceforge.net/)]というユーティリティーに発想を得たものです。ここからユニットテストのテストは、メソッド(関数)をテストするための治具という位置づけから発展し、ソフトウェアの使用を記述するためのドキュメントとしての位置づけを得るようになります。


# 

RSpecは Steven Baker氏 Dave Astels氏、 Aslak Hellesøy氏、 David Chelimsky氏とともに2005年に開発をはじめたruby向けのテスティングフレームワークです。RSpecの特徴は、テストの記述をrubyを用いて言語内DSLとして記述することにあります。もともとrubyコミュニティーでは、タスクツールであるRakeをはじまりに、ブロック構文などのrubyの言語機能を生かして言語内DSLでツールを記述する文化があり、言語内DSLの特徴を最大限に生かしたがWebアプリケーションフレームワークであるRuby on Railsですが、North氏が発案したBDDの思想は、ここで言語内DSLというフォーマットを得ることにより、「実行可能な仕様」(Executable specification)という方向を目指すことになります。




## Fit 

## Seleniumによるブラウザー自動化の萌芽

## Outside-in , Inside-out

## 「二重のフィードバックループ」  

BDDとは
